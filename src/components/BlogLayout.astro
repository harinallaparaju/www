---
import '../global.css';
import Header from './Header.astro';
import Footer from './Footer.astro';

interface Props {
  title?: string;
  description?: string;
  pubDate?: string;
}

const {
  title = "",
  description = "Blog post description",
  pubDate
} = Astro.props;

const formattedDate = pubDate
  ? new Date(pubDate).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })
  : null;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{title} | Surya Nallaparaju</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL.href} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="article" />
  </head>

  <body class="bg-neutral-50 antialiased text-neutral-900 mb-6">
    <!-- âœ… Same header as all pages -->
    <div class="flex justify-center">
      <div class="flex min-h-screen w-[90vw] flex-col xs:w-[500px] max-w-4xl">
        <Header />

        <!-- Article content -->
        <main class="flex-grow mt-6">
          <article class="max-w-prose">
            <header class="mb-8">
              <h1 class="text-2xl font-medium mb-2 leading-tight">
                {title}
              </h1>
              {formattedDate && (
                <div class="text-sm text-neutral-500 font-light">
                  <time datetime={new Date(pubDate!).toISOString()}>
                    {formattedDate}
                  </time>
                </div>
              )}
            </header>

            <div class="prose prose-neutral max-w-none">
              <slot />
            </div>
          </article>
        </main>

        <Footer />
      </div>
    </div>

    <!-- Subtle top/bottom blurs -->
    <div class="fixed top-[-10px] z-40 h-12 w-screen bg-neutral-100 opacity-90 blur" aria-hidden="true"></div>
    <div class="fixed bottom-[-10px] z-40 h-12 w-screen bg-neutral-100 opacity-90 blur" aria-hidden="true"></div>
  </body>
</html>
