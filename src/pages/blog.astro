---
import Layout from "../components/Layout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog");
const sortedPosts = posts.sort(
  (a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate)
);
---

<Layout>
  <section>
    <h1 class="text-2xl font-semibold mb-2">Writing</h1>
    <p class="text-neutral-600 font-light mb-6">
    Thoughts, stories, and reflections from my learning journey.
    </p>


    <!-- Tag pills row -->
    <div class="flex gap-2 mb-8">
      <a href="/blog" class="tag-pill">All</a>
      <a href="/blog/tag/notes" class="tag-pill">Notes</a>
      <a href="/blog/tag/projects" class="tag-pill">Projects</a>
    </div>

    <!-- Blog list -->
    <div class="space-y-10">
      {sortedPosts.map(post => (
        <article class="animate-intro">
          <a href={`/blog/${post.slug}/`} class="block group">
            <h2 class="text-xl font-medium group-hover:text-yellow-600 transition-colors">
              {post.data.title}
            </h2>
            {post.data.description && (
              <p class="text-neutral-500 mt-1 text-sm max-w-prose">
                {post.data.description}
              </p>
            )}
            <time
              datetime={new Date(post.data.pubDate).toISOString()}
              class="text-xs text-neutral-400 mt-1 block"
            >
              {new Date(post.data.pubDate).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
              })}
            </time>
          </a>
        </article>
      ))}
    </div>

    {sortedPosts.length === 0 && (
      <p class="text-neutral-500 mt-8">No posts yet. Start writing.</p>
    )}
  </section>
</Layout>
